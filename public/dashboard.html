<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
</head>
<body>
  <h1>Encoding History</h1>
  <table id="historyTable">
    <thead>
      <tr>
        <th>Video Path</th>
        <th>Subtitles Path</th>
        <th>Logo Path</th>
        <th>Output Path</th>
        <th>Timestamp</th>
      </tr>
    </thead>
    <tbody>
      <!-- History will be populated here -->
    </tbody>
  </table>

  <script>
    async function fetchHistory() {
      const response = await fetch('/history');
      const history = await response.json();

      const historyTableBody = document.querySelector('#historyTable tbody');
      historyTableBody.innerHTML = '';

      history.forEach(entry => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${entry.videoPath}</td>
          <td>${entry.subtitlesPath}</td>
          <td>${entry.logoPath ? entry.logoPath : 'N/A'}</td>
          <td><a href="${entry.outputPath}" download>Download</a></td>
          <td>${new Date(entry.timestamp).toLocaleString()}</td>
        `;
        historyTableBody.appendChild(row);
      });
    }

    fetchHistory();
  </script>
</body>
</html>
